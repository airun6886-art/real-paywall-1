<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Login Real Paywall</title>
</head>
<body>
  <h1>Login / Obtener diagnóstico</h1>

  <input type="email" id="email" placeholder="Tu email">
  <button id="loginBtn">Enviar Magic Link</button>

  <!-- Librería Supabase UMD (compatible HTML puro) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.24.0/dist/supabase.min.js"></script>


  <!-- Configuración Supabase -->
  <script src="lib/supabase.js"></script>

  <!-- Código del botón -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("loginBtn");
      btn.addEventListener("click", async () => {
        const email = document.getElementById("email").value.trim();
        if (!email) { alert("Por favor ingresa tu email"); return; }

        const { error } = await supabase.auth.signInWithOtp({ email });
        if (error) alert("Error: " + error.message);
        else alert("¡Revisa tu correo para continuar!");
      });
    });
  </script>
</body>
</html>
